!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMIME("text/x-erlang","erlang"),e.defineMode("erlang",function(t){var r=["-type","-spec","-export_type","-opaque"],n=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"],i=/[\->,;]/,o=["->",";",","],a=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"],c=/[\+\-\*\/<>=\|:!]/,s=["=","+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"],u=/[<\(\[\{]/,l=["<<","(","[","{"],_=/[>\)\]\}]/,f=["}","]",")",">>"],p=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary","bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"],m=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node","node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"],d=/[\w@Ø-ÞÀ-Öß-öø-ÿ]/,b=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;function g(e,t,r){if(1==e.current().length&&t.test(e.current())){for(e.backUp(1);t.test(e.peek());)if(e.next(),w(e.current(),r))return!0;e.backUp(e.current().length-1)}return!1}function k(e,t,r){if(1==e.current().length&&t.test(e.current())){for(;t.test(e.peek());)e.next();for(;0<e.current().length;){if(w(e.current(),r))return!0;e.backUp(1)}e.next()}return!1}function h(e){return v(e,'"',"\\")}function y(e){return v(e,"'","\\")}function v(e,t,r){for(;!e.eol();){var n=e.next();if(n==t)return!0;n==r&&e.next()}return!1}function w(e,t){return-1<t.indexOf(e)}function x(e,t,r){var n,i,o,a,c,s,u;switch(a=e,s=r,"comment"!=(c=S((u=t).current(),u.column(),u.indentation(),s)).type&&"whitespace"!=c.type&&(a.tokenStack=(n=a.tokenStack,i=c,0<(o=n.length-1)&&"record"===n[o].type&&"dot"===i.type?n.pop():0<o&&"group"===n[o].type?(n.pop(),n.push(i)):n.push(i),n),a.tokenStack=function(e){if(!e.length)return e;var t=e.length-1;if("dot"===e[t].type)return[];if(t>1&&"fun"===e[t].type&&"fun"===e[t-1].token)return e.slice(0,t-1);switch(e[t].token){case"}":return W(e,{g:["{"]});case"]":return W(e,{i:["["]});case")":return W(e,{i:["("]});case">>":return W(e,{i:["<<"]});case"end":return W(e,{i:["begin","case","fun","if","receive","try"]});case",":return W(e,{e:["begin","try","when","->",",","(","[","{","<<"]});case"->":return W(e,{r:["when"],m:["try","if","case","receive"]});case";":return W(e,{E:["case","fun","if","receive","try","when"]});case"catch":return W(e,{e:["try"]});case"of":return W(e,{e:["case"]});case"after":return W(e,{e:["receive","try"]});default:return e}}(a.tokenStack)),r){case"atom":return"atom";case"attribute":return"attribute";case"boolean":return"atom";case"builtin":return"builtin";case"close_paren":case"colon":return null;case"comment":return"comment";case"dot":return null;case"error":return"error";case"fun":return"meta";case"function":return"tag";case"guard":return"property";case"keyword":return"keyword";case"macro":return"variable-2";case"number":return"number";case"open_paren":return null;case"operator":return"operator";case"record":return"bracket";case"separator":return null;case"string":return"string";case"type":return"def";case"variable":return"variable";default:return null}}function S(e,t,r,n){return{token:e,column:t,indent:r,type:n}}function z(e,t){var r=e.tokenStack.length,n=t||1;return!(r<n)&&e.tokenStack[r-n]}function W(e,t){for(var r in t)for(var n=e.length-1,i=t[r],o=n-1;-1<o;o--)if(w(e[o].token,i)){var a=e.slice(0,o);switch(r){case"m":return a.concat(e[o]).concat(e[n]);case"r":return a.concat(e[n]);case"i":return a;case"g":return a.concat(S(c="group",0,0,c));case"E":case"e":return a.concat(e[o])}}var c;return"E"==r?[]:e}function U(r,n){var i,o,a,c,s,u,_,p=t.indentUnit,m=Z(o=n.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/))&&0===o.index?o[0]:"",d=z(r,1),b=z(r,2);return r.in_string||r.in_atom?e.Pass:b?"when"==d.token?d.column+p:"when"===m&&"function"===b.type?b.indent+p:"("===m&&"fun"===d.token?d.column+3:"catch"===m&&(i=E(r,["try"]))?i.column:w(m,["end","after","of"])?(i=E(r,["begin","case","fun","if","receive","try"]))?i.column:e.Pass:w(m,f)?(i=E(r,l))?i.column:e.Pass:w(d.token,[",","|","||"])||w(m,[",","|","||"])?(u=r.tokenStack.slice(0,-1),_=A(u,"type",["open_paren"]),(i=!!Z(u[_])&&u[_])?i.column+i.token.length:p):"->"==d.token?w(b.token,["receive","case","if","try"])?b.column+p+p:b.column+p:w(d.token,l)?d.column+d.token.length:(a=r.tokenStack,c=A(a,"type",["open_paren","separator","keyword"]),s=A(a,"type",["operator"]),Z(i=Z(c)&&Z(s)&&c<s?a[c+1]:!!Z(c)&&a[c])?i.column+p:0):0}function E(e,t){var r=e.tokenStack,n=A(r,"token",t);return!!Z(r[n])&&r[n]}function A(e,t,r){for(var n=e.length-1;-1<n;n--)if(w(e[n][t],r))return n;return!1}function Z(e){return!1!==e&&null!=e}return{startState:function(){return{tokenStack:[],in_string:!1,in_atom:!1}},token:function(e,t){return function(e,t){if(t.in_string)return t.in_string=!h(e),x(t,e,"string");if(t.in_atom)return t.in_atom=!y(e),x(t,e,"atom");if(e.eatSpace())return x(t,e,"whitespace");if(!z(t)&&e.match(/-\s*[a-zß-öø-ÿ][\wØ-ÞÀ-Öß-öø-ÿ]*/))return w(e.current(),r)?x(t,e,"type"):x(t,e,"attribute");var v,S=e.next();if("%"==S)return e.skipToEnd(),x(t,e,"comment");if(":"==S)return x(t,e,"colon");if("?"==S)return e.eatSpace(),e.eatWhile(d),x(t,e,"macro");if("#"==S)return e.eatSpace(),e.eatWhile(d),x(t,e,"record");if("$"==S)return"\\"!=e.next()||e.match(b)?x(t,e,"number"):x(t,e,"error");if("."==S)return x(t,e,"dot");if("'"==S){if(!(t.in_atom=!y(e))){if(e.match(/\s*\/\s*[0-9]/,!1))return e.match(/\s*\/\s*[0-9]/,!0),x(t,e,"fun");if(e.match(/\s*\(/,!1)||e.match(/\s*:/,!1))return x(t,e,"function")}return x(t,e,"atom")}if('"'==S)return t.in_string=!h(e),x(t,e,"string");if(/[A-Z_Ø-ÞÀ-Ö]/.test(S))return e.eatWhile(d),x(t,e,"variable");if(/[a-z_ß-öø-ÿ]/.test(S)){if(e.eatWhile(d),e.match(/\s*\/\s*[0-9]/,!1))return e.match(/\s*\/\s*[0-9]/,!0),x(t,e,"fun");var W=e.current();return w(W,n)?x(t,e,"keyword"):w(W,a)?x(t,e,"operator"):e.match(/\s*\(/,!1)?!w(W,m)||":"==z(t).token&&"erlang"!=z(t,2).token?w(W,p)?x(t,e,"guard"):x(t,e,"function"):x(t,e,"builtin"):":"==((v=e.match(/([\n\s]+|%[^\n]*\n)*(.)/,!1))?v.pop():"")?x(t,e,"erlang"==W?"builtin":"function"):w(W,["true","false"])?x(t,e,"boolean"):x(t,e,"atom")}var U=/[0-9]/;return U.test(S)?(e.eatWhile(U),e.eat("#")?e.eatWhile(/[0-9a-zA-Z]/)||e.backUp(1):e.eat(".")&&(e.eatWhile(U)?e.eat(/[eE]/)&&(e.eat(/[-+]/)?e.eatWhile(U)||e.backUp(2):e.eatWhile(U)||e.backUp(1)):e.backUp(1)),x(t,e,"number")):g(e,u,l)?x(t,e,"open_paren"):g(e,_,f)?x(t,e,"close_paren"):k(e,i,o)?x(t,e,"separator"):k(e,c,s)?x(t,e,"operator"):x(t,e,null)}(e,t)},indent:function(e,t){return U(e,t)},lineComment:"%"}})});